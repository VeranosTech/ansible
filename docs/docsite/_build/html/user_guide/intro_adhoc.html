

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ko" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ko" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>임시변통 명령의 소개 &mdash; Ansible Documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://veranostech.github.io/docs-korean-ansible/docs/docsite/_build/htmluser_guide/intro_adhoc.html"/>
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Ansible Documentation에서 찾기"
          href="../_static/opensearch.xml"/>

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansible.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansible.css" type="text/css" />
    <link rel="index" title="색인" href="../genindex.html" />
    <link rel="search" title="검색" href="../search.html" />
    <link rel="next" title="인벤토리 작업" href="intro_inventory.html" />
    <link rel="prev" title="ansible-vault" href="../cli/ansible-vault.html" /> <!---- extra head elements for Ansible beyond RTD Sphinx Theme --->
<script type="text/javascript" src="//www.redhat.com/dtm.js"></script>
<meta class="swiftype" name="published_at" data-type="date" content="2017-12-13" />
<meta class="swiftype" name="version" data-type="string" content="3.2.2">

<!-- Google Tag Manager Data Layer -->
<script>
 dataLayer = [];
</script>
<!-- End Google Tag Manager Data Layer -->

<script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script> 
</head>

<body class="wy-body-for-nav">
   <!---- extra body elements for Ansible beyond RTD Sphinx Theme --->
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
<!-- End Google Tag Manager -->

  <div class="DocSite-globalNav ansibleNav">
      <ul>
          <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
          <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
          <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
          <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
          <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
      </ul>
  </div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../_static/images/logo_invert.png"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">
    Documentation
  </div>
</a> 
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Ansible
          

          
          </a>

          
            
            
              <div class="version">
                devel
              </div>
            
          

          <!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    <div class="version-dropdown">
      <select class="version-list" id="version-list" onchange="javascript:location.href = this.value;">
        <script> x = document.getElementById("version-list"); </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "latest";
            if ( "latest" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","latest");
            } else {
              option.value = current_url.replace("latest","latest");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "2.7";
            if ( "2.7" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","2.7");
            } else {
              option.value = current_url.replace("latest","2.7");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "2.6";
            if ( "2.6" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","2.6");
            } else {
              option.value = current_url.replace("latest","2.6");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "devel";
            if ( "devel" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","devel");
            } else {
              option.value = current_url.replace("latest","devel");
            }
            x.add(option);
          </script>
        
      </select>
    </div>
  
</div>
          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">설치, 업그레이드, 설정</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting_guides/porting_guides.html">Ansible Porting Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Ansible 사용법</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">사용자 안내서</a></li>
</ul>
<p class="caption"><span class="caption-text">Ansible에 기여하기</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Ansible Community Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Ansible 확장하기</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Common Ansible Scenarios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/cloud_guides.html">Public Cloud Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/network_guides.html">Network Technology Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/virt_guides.html">Virtualization and Containerization Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">네트워크 자동화용 Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../network/index.html">Ansible for Network Automation</a></li>
</ul>
<p class="caption"><span class="caption-text">참조서와 부록</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/modules_by_category.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/playbooks_keywords.html">Playbook Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/galaxy.html">Ansible Galaxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/common_return_values.html">Return Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/config.html">Ansible 설정</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/general_precedence.html">Controlling how Ansible behaves: precedence rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/YAMLSyntax.html">YAML 문법</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/python_3_support.html">Python 3 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/interpreter_discovery.html">Interpreter Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/release_and_maintenance.html">Release and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/test_strategies.html">Testing Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing/sanity/index.html">Sanity Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/module_utils.html">Ansible Reference: Module Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/special_variables.html">Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/tower.html">Red Hat Ansible Tower</a></li>
</ul>
<p class="caption"><span class="caption-text">장기계획</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/index.html">Ansible Roadmap</a></li>
</ul>

            
          
        </div>
        
         <!-- extra nav elements for Ansible beyond RTD Sphinx Theme --->
<!-- changeable widget links to tower - do not change as image controlled by Ansible-->
<div id="sideBanner">
  <br/>
  <a href="https://www.ansible.com/docs-left?utm_source=docs">
    <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
  </a>
  <br/><br/><br/>
</div>
      </div>
    </nav>
  </div>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ansible</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          
















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">사용자 안내서</a> &raquo;</li>
        
      <li>임시변통 명령의 소개</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <!-- Ansible-specific additions for modules etc -->
                
                  <a href="https://github.com/ansible/ansible/edit/devel/docs/docsite/rst/user_guide/intro_adhoc.rst?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> Edit on GitHub</a>
                
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <!--- Based on sphinx versionwarning extension. Extension currently only works on READTHEDOCS -->

  <script>
    current_url = window.location.href;
    if ((current_url.search("latest") > -1) || (current_url.search("/2.8/") > -1)) {
     // no banner for latest release
    } else if (current_url.search("devel") > -1) {
      document.write('<div id="banner_id" class="admonition caution">');
      para = document.createElement('p');
      banner_text=document.createTextNode("You are reading the *devel* version of the Ansible documentation - this version is not guaranteed stable. Use the version selection to the left if you want the latest stable released version.");
      para.appendChild(banner_text);
      element = document.getElementById('banner_id');
      element.appendChild(para);
      document.write('</div>');
    } else {
      document.write('<div id="banner_id" class="admonition caution">');
      para = document.createElement('p');
      banner_text=document.createTextNode("You are reading an older version of the Ansible documentation. Use the version selection to the left if you want the latest stable released version.");
      para.appendChild(banner_text);
      element = document.getElementById('banner_id');
      element.appendChild(para);
      document.write('</div>');
    }
  </script>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction-to-ad-hoc-commands">
<span id="intro-adhoc"></span><h1><a class="toc-backref" href="#id7">임시변통 명령의 소개</a><a class="headerlink" href="#introduction-to-ad-hoc-commands" title="제목 주소">¶</a></h1>
<div class="contents topic" id="topics">
<p class="topic-title first">주제</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction-to-ad-hoc-commands" id="id7">임시변통 명령의 소개</a></p>
<ul>
<li><p><a class="reference internal" href="#parallelism-and-shell-commands" id="id8">동시실행과 셸 명령</a></p></li>
<li><p><a class="reference internal" href="#file-transfer" id="id9">파일 전송</a></p></li>
<li><p><a class="reference internal" href="#managing-packages" id="id10">패키지 관리</a></p></li>
<li><p><a class="reference internal" href="#users-and-groups" id="id11">사용자와 그룹</a></p></li>
<li><p><a class="reference internal" href="#deploying-from-source-control" id="id12">소스 제어시에 배포하는 방법</a></p></li>
<li><p><a class="reference internal" href="#managing-services" id="id13">서비스 관리</a></p></li>
<li><p><a class="reference internal" href="#time-limited-background-operations" id="id14">시간제한 백그라운드 동작</a></p></li>
<li><p><a class="reference internal" href="#gathering-facts" id="id15">팩트 수집</a></p></li>
</ul>
</li>
</ul>
</div>
<p>다음 예제는 임시변통으로 작업해야할 때 <cite>/usr/bin/ansible</cite>를 사용하면 방법에 대한 것이다.</p>
<p>임시변통 명령이란?</p>
<p>임시변통 명령(ad-hoc command)은 무언가를 빠르게, 하지만 두 번 이상은 하지 않는 것을 말한다.</p>
<p>이 절은 플레이북 언어를 공부하기 전에 Ansible로 무엇을 할 수 있는지 알려준다. 임시변통 명령은 완전한 플레이북을 작성할 필요가 없이 무언가를 빨리 하고싶을 때 쓸 수 있다.</p>
<p>보통은 Ansible의 가장 큰 장점이 플레이북에서 발휘된다. 그러면 왜 플레이북이 아닌 임시변통 업무가 필요한가?</p>
<p>예를 들어 크리스마스 휴가때 연구실의 모든 파워를 내리고 싶을 때, 한 줄 짜리 플레이북을 작성할 수도 있을 것이다.</p>
<p>하지만 관리와 배포 설정을 위해 여기서 배울 '/usr/bin/ansible-playbook'를 사용해도 나중에 쉽게 플레이북 언어로 변환할 수 있다.</p>
<p>(See <a class="reference internal" href="playbooks.html#working-with-playbooks"><span class="std std-ref">플레이북 작업</span></a> for more information about those)</p>
<p>If you haven't read <a class="reference internal" href="intro_inventory.html#intro-inventory"><span class="std std-ref">인벤토리 작업</span></a> already, please look that over a bit first
and then we'll get going.</p>
<div class="section" id="parallelism-and-shell-commands">
<span id="id1"></span><h2><a class="toc-backref" href="#id8">동시실행과 셸 명령</a><a class="headerlink" href="#parallelism-and-shell-commands" title="제목 주소">¶</a></h2>
<p>예제</p>
<p>Ansible 명령줄 도구를 사용하여 아틀란타에 있는 모든 서버를 한번에 10개씩 리부팅해보자. 우선 SSH-agent를 설정해서 암호를 기억하도록 한다.:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ssh-agent bash</span>
<span class="l l-Scalar l-Scalar-Plain">$ ssh-add ~/.ssh/id_rsa</span>
</pre></div>
</div>
<p>키와 ssh-agent를 사용하지 않고 패스워드를 사용하려면 <code class="docutils literal notranslate"><span class="pre">--ask-pass</span></code> (<code class="docutils literal notranslate"><span class="pre">-k</span></code>) 옵션을 사용한다. 하지만 ssh-agent를 사용하는 것이 훨씬 낫다.</p>
<p>이제 그룹(이 예제에서는 <em>atlanta</em>)안의 모든 서버에 대새 한번에 10개씩 명령이 실행되도록 한다.:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible atlanta -a &quot;/sbin/reboot&quot; -f 10</span>
</pre></div>
</div>
<p>디폴트 사용자 계정에서 /usr/bin/ansible 가 실행될 것이다. 만약 다른 사용자 계정을 쓰고 싶다면 &quot;-u username&quot; 옵션을 추가하라. 다음과 같이 된다.:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible atlanta -a &quot;/usr/bin/foo&quot; -u username</span>
</pre></div>
</div>
<p>사용자 계정이 아니라 관리자 계정으로 작업을 하길 원할 수도 있다. 더 높은 권한으로 명령을 실행하려면:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible atlanta -a &quot;/usr/bin/foo&quot; -u username --become [--ask-become-pass]</span>
</pre></div>
</div>
<p>sudo/su/pfexec/doas 등을 써서 패스워드 없이 권한을 올리려면 <code class="docutils literal notranslate"><span class="pre">--ask-become-pass</span></code> (<code class="docutils literal notranslate"><span class="pre">-K</span></code>) 옵션을 사용한다. 이 때는 사용할 패스워드를 물어볼 것이다. 패스워드 없이 사용하면 자동화가 더 용이하지만 반드시 그래야 하는 것은 아니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">--become-user</span></code> 옵션으로 루트가 아닌 다른 사용자가 될 수도 있다.</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible atlanta -a &quot;/usr/bin/foo&quot; -u username --become --become-user otheruser [--ask-become-pass]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">참고</p>
<p>가끔씩 어떤 사용자는 보안상 sudo/pbrun/doas 사용을 특정 명령만 할 수 있도록 제한된다.Ansible의  이는 no-bootstrapping 정책, 그리고 수백개의 모듈과 맞지 않는다. 이런 제한이 없는 계정으로 Ansible을 사용하라. 권한이 없는 사용자에게 권한을 공유하지 않으면서 이렇게 하는 방법중의 하나는 <a class="reference internal" href="../reference_appendices/tower.html#ansible-tower"><span class="std std-ref">Red Hat Ansible Tower</span></a>를 사용하는 것이다. <a class="reference internal" href="../reference_appendices/tower.html#ansible-tower"><span class="std std-ref">Red Hat Ansible Tower</span></a>는 모든 SSH 암호를 가지고 있어서 조직의 특정 사용자를 대신하여 직접 제어를 할 수 있다.</p>
</div>
<p>이제 기본을 마쳤다. 패턴과 그룹에 대해 읽기 않았다면 돌아가서 <a class="reference internal" href="intro_patterns.html#intro-patterns"><span class="std std-ref">Working with Patterns</span></a>를 읽기 바란다.</p>
<p>위 코드의 <code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">10</span></code> 옵션은 10개씩 동시에 실행하라는 뜻이다. <a class="reference internal" href="../installation_guide/intro_configuration.html#intro-configuration"><span class="std std-ref">앤서블 설정</span></a> 설정에서 할 수도 있다. 디폴트는 5개로 보수적으로 작게 잡혀있다. 이 옵션을 사용하면 더 많은 호스트를 쓰고 싶을 때 자유롭게 증가시킬 수 있다. 실제 호스트 수가 이보다 많으면 시간이 더 걸린다. 자유롭게 이 값을 올려서 사용하라.</p>
<p>You can also select what Ansible &quot;module&quot; you want to run.  Normally commands also take a <code class="docutils literal notranslate"><span class="pre">-m</span></code> for module name, but
the default module name is 'command', so we didn't need to
specify that all of the time.  We'll use <code class="docutils literal notranslate"><span class="pre">-m</span></code> in later examples to
run some other modules.</p>
<div class="admonition note">
<p class="admonition-title">참고</p>
<p><a class="reference internal" href="../modules/command_module.html#command-module"><span class="std std-ref">command 모듈</span></a>은 파이프라인이나 리다이렉션같은 셸의 고급 문법을 지원하지 않는다. (셸 변수는 동작한다.) 만약 셀에 종속적인 기능을 사용하고 싶으면 <cite>shell</cite> 모듈을 사용하라. 차이점에 대해서는 <a class="reference internal" href="modules.html#working-with-modules"><span class="std std-ref">Working With Modules</span></a> 페이지에 나와 있다.</p>
</div>
<p><a class="reference internal" href="../modules/shell_module.html#shell-module"><span class="std std-ref">shell 모듈</span></a> 사용방법은 다음과 같다.:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible raleigh -m shell -a &#39;echo $TERM&#39;</span>
</pre></div>
</div>
<p>When running any command with the Ansible <em>ad hoc</em> CLI (as opposed to
<a class="reference internal" href="playbooks.html#working-with-playbooks"><span class="std std-ref">Playbooks</span></a>), pay particular attention to shell quoting rules, so
the local shell doesn't eat a variable before it gets passed to Ansible.
For example, using double rather than single quotes in the above example would
evaluate the variable on the box you were on.</p>
<p>지금까지 간단한 명령 실행을 보였는데 대부분의 Ansible 모듈은 단순한 명령형 스크립트가 아니라 선언형 모형을 사용해서 지시한 최종 상태에 도달하기 위해 필요한 행위를 계산하고 실행한다. 또한 시작전에 현재 상태를 확인해서 시스템의 항등성(idempotence)을 확보한다. 만약 현재의 상태가 지시한 상태와 같다면 아무것도 하지 않을 것이다. 하지만 상태에 관계없이 명령을 반드시 실행해야하는 경우도 있기 때문에 Ansible은 두 가지 모두 지원한다.</p>
</div>
<div class="section" id="file-transfer">
<span id="id2"></span><h2><a class="toc-backref" href="#id9">파일 전송</a><a class="headerlink" href="#file-transfer" title="제목 주소">¶</a></h2>
<p><cite>/usr/bin/ansible</cite>  명령을 사용하는 다른 경우는 SCP로 여러대의 머신에 파일을 동시 전송하는 것이다.</p>
<p>파일을 복수 서버에 직접 전송하려면:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible atlanta -m copy -a &quot;src=/etc/hosts dest=/tmp/hosts&quot;</span>
</pre></div>
</div>
<p>만약 플레이북을 사용하면 <code class="docutils literal notranslate"><span class="pre">template</span></code> 모듈도 쓸 수 있다. (모듈과 플레이북 문서를 참조하라.)</p>
<p><code class="docutils literal notranslate"><span class="pre">file</span></code> 모듈은 파일의 소유자와 권한도 바꿀 수 있다. 이 옵션은 <code class="docutils literal notranslate"><span class="pre">copy</span></code> 모듈에도 적용된다.:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m file -a &quot;dest=/srv/foo/a.txt mode=600&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m file -a &quot;dest=/srv/foo/b.txt mode=600 owner=mdehaan group=mdehaan&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">file</span></code> 모듈은 <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">-p</span></code> 명령처럼 디렉토리도 만들 수 있다.:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m file -a &quot;dest=/path/to/c mode=755 owner=mdehaan group=mdehaan state=directory&quot;</span>
</pre></div>
</div>
<p>디렉토리와 파일을 재귀적으로 지울 수도 있다.:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m file -a &quot;dest=/path/to/c state=absent&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="managing-packages">
<span id="id3"></span><h2><a class="toc-backref" href="#id10">패키지 관리</a><a class="headerlink" href="#managing-packages" title="제목 주소">¶</a></h2>
<p>yum와 apt용 모듈도 있다. 다음은 yum 예제들이다.</p>
<p>패키지가 설치되었는지 확인하여 설치한다. 업데이트하지는 않는다:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m yum -a &quot;name=acme state=present&quot;</span>
</pre></div>
</div>
<p>패키지가 특정 버전으로 설치되었는지 확인하여 설치한다:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m yum -a &quot;name=acme-1.5 state=present&quot;</span>
</pre></div>
</div>
<p>패키지가 최신버전인지 확인하여 설치한다.:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m yum -a &quot;name=acme state=latest&quot;</span>
</pre></div>
</div>
<p>패키지가 설치되지 않았는지 확인하여 제거한다.</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m yum -a &quot;name=acme state=absent&quot;</span>
</pre></div>
</div>
<p>Ansible은 여러 플랫폼의 패키지를 관리하는 모듈을 가지고 있다. 만약 원하는 패키지 관리자가 없으면 command 모듈로 설치하거나 패키지 관리자를 직접 제작하여 Ansible에 기여할 수도 있다. 자세한 내용은 메일링 리스트를 참조한다.</p>
</div>
<div class="section" id="users-and-groups">
<span id="id4"></span><h2><a class="toc-backref" href="#id11">사용자와 그룹</a><a class="headerlink" href="#users-and-groups" title="제목 주소">¶</a></h2>
<p>'user' 모듈은 사용자 계정 생성 및 관리를 돕는다. 이미 있는 사용자 계정을 삭제할 수도 있다.:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible all -m user -a &quot;name=foo password=&lt;crypted password here&gt;&quot;</span>

<span class="l l-Scalar l-Scalar-Plain">$ ansible all -m user -a &quot;name=foo state=absent&quot;</span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="../modules/modules_by_category.html#modules-by-category"><span class="std std-ref">Module Docs</span></a> section for details on all of the available options, including
how to manipulate groups and group membership.</p>
</div>
<div class="section" id="deploying-from-source-control">
<span id="from-source-control"></span><h2><a class="toc-backref" href="#id12">소스 제어시에 배포하는 방법</a><a class="headerlink" href="#deploying-from-source-control" title="제목 주소">¶</a></h2>
<p>git에서 직접 배포하려면:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m git -a &quot;repo=https://foo.example.org/repo.git dest=/srv/myapp version=HEAD&quot;</span>
</pre></div>
</div>
<p>Ansible 모듈은 변동 사항을 알려줄 수 있으므로 코드가 업데이트 되었을 때 특정한 작업을 실시하도록 할 수 있다. 예를 들어 Perl/Python/PHP/Ruby를 git에서 배포한 후 아파치를 재시작할 수 있다.</p>
</div>
<div class="section" id="managing-services">
<span id="id5"></span><h2><a class="toc-backref" href="#id13">서비스 관리</a><a class="headerlink" href="#managing-services" title="제목 주소">¶</a></h2>
<p>모든 웹서버의 서비스를 시작하려면:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m service -a &quot;name=httpd state=started&quot;</span>
</pre></div>
</div>
<p>모든 웹서버의 서비스를 재시작하려면:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m service -a &quot;name=httpd state=restarted&quot;</span>
</pre></div>
</div>
<p>서비스를 멈추려면:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible webservers -m service -a &quot;name=httpd state=stopped&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="time-limited-background-operations">
<span id="id6"></span><h2><a class="toc-backref" href="#id14">시간제한 백그라운드 동작</a><a class="headerlink" href="#time-limited-background-operations" title="제목 주소">¶</a></h2>
<p>시간이 오래 걸리는 동작은 백그라운드에서 실행한 후에 나중에 상태를 확인할 수 있다. 예를 들어 <code class="docutils literal notranslate"><span class="pre">long_running_operation</span></code>을 3600 초 시간제한을 두고 (<code class="docutils literal notranslate"><span class="pre">-B</span></code>) 폴링 없이 (<code class="docutils literal notranslate"><span class="pre">-P</span></code>) 백그라운드에서 비동기적으로 실행하려면:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible all -B 3600 -P 0 -a &quot;/usr/bin/long_running_operation --do-stuff&quot;</span>
</pre></div>
</div>
<p>작업 상태를 나중에 확인하기로 했다면 async_status 모듈을 사용한다. 작업 아이디를 넘기면 백그라운드에서 작업을 실시할 때 반환된다.:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible web1.example.com -m async_status -a &quot;jid=488359678239.2844&quot;</span>
</pre></div>
</div>
<p>폴링도 구현되어 있다:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible all -B 1800 -P 60 -a &quot;/usr/bin/long_running_operation --do-stuff&quot;</span>
</pre></div>
</div>
<p>위 예제는 &quot;최대 30분동안 (<code class="docutils literal notranslate"><span class="pre">-B</span></code> 30*60=1800) 실행하고 60초마다 상태를 확인하라(<code class="docutils literal notranslate"><span class="pre">-P</span></code>)는 뜻이다.</p>
<p>폴 모드는 모든 작업이 머신에서 시작한 다음에 시작된다. 만약 모든 작업을 빨리 시작하고 싶다면 <code class="docutils literal notranslate"><span class="pre">--forks</span></code> 수를 크게 하라. (초단위) 시간 제한 (<code class="docutils literal notranslate"><span class="pre">-B</span></code>)이 지나면 원격 노드의 프로세스가 강제종료된다.</p>
<p>Typically you'll only be backgrounding long-running
shell commands or software upgrades.  Backgrounding the copy module does not do a background file transfer. <a class="reference internal" href="playbooks.html#working-with-playbooks"><span class="std std-ref">Playbooks</span></a> also support polling, and have a simplified syntax for this.</p>
</div>
<div class="section" id="gathering-facts">
<span id="checking-facts"></span><h2><a class="toc-backref" href="#id15">팩트 수집</a><a class="headerlink" href="#gathering-facts" title="제목 주소">¶</a></h2>
<p>팩트는 시스템에 관련된 정보로서 플레이북 문서에서 설명한다. 조건부 작업을 구현하기위해 쓰이지만 간단히 시스템 정보를 수집할 수도 있다:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">$ ansible all -m setup</span>
</pre></div>
</div>
<p>이 출력에서 특정 팩트만 필터링하여 출력할 수도 있다. 자세한 내용은 &quot;setup&quot; 모듈을 참조한다.</p>
<p>Read more about facts at <a class="reference internal" href="playbooks_variables.html#playbooks-variables"><span class="std std-ref">Using Variables</span></a> once you're ready to read up on <a class="reference internal" href="playbooks_intro.html#playbooks-intro"><span class="std std-ref">Playbooks</span></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">더 보기</p>
<dl class="simple">
<dt><a class="reference internal" href="../installation_guide/intro_configuration.html#intro-configuration"><span class="std std-ref">앤서블 설정</span></a></dt><dd><p>Ansible 설정 파일</p>
</dd>
<dt><a class="reference internal" href="../modules/list_of_all_modules.html#all-modules"><span class="std std-ref">All modules</span></a></dt><dd><p>전체 모듈 목록</p>
</dd>
<dt><a class="reference internal" href="playbooks.html#working-with-playbooks"><span class="std std-ref">플레이북 작업</span></a></dt><dd><p>Ansible을 이용한 설정 관리 및 배포</p>
</dd>
<dt><a class="reference external" href="https://groups.google.com/group/ansible-project">메일링 리스트</a></dt><dd><p>질문이나 도움요청, 아이디어 재공은 구글 그룹을 참조하라.</p>
</dd>
<dt><a class="reference external" href="http://irc.freenode.net">irc.freenode.net</a></dt><dd><p>#ansible IRC chat channel</p>
</dd>
</dl>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="intro_inventory.html" class="btn btn-neutral float-right" title="인벤토리 작업"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../cli/ansible-vault.html" class="btn btn-neutral" title="ansible-vault"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 Red Hat, Inc.
      <span class="lastupdated">
        최종 업데이트: 10월 07, 2019
      </span>

    </p>
  </div> 
</footer>
        </div>
      </div>

    </section>

  </div>

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script>

  
  
    
   <!-- extra footer elements for Ansible beyond RTD Sphinx Theme --->
<!-- begin analytics -->
<script type="text/javascript">
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
      (function(d,s,i,r) {
      if (d.getElementById(i)){return;}
      var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
      n.id=i;n.src = '//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
      e.parentNode.insertBefore(n, e);
      })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
  _satellite.pageBottom();
}
</script> 

</body>
</html>